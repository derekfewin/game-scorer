<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Game Night Scorer</title>
    
    <!-- Styles -->
    <link rel="stylesheet" href="css/styles.css">
    
    <!-- Error Logger -->
    <style>
        #debug-log { 
            display: none; 
            background: #fee; 
            border: 1px solid #c00; 
            color: #c00; 
            padding: 10px; 
            margin: 10px; 
            border-radius: 5px; 
            font-family: monospace; 
            font-size: 12px; 
            white-space: pre-wrap; 
        }
        
        /* Dark Mode */
        body.dark-mode {
            background: #1a1a1a;
            color: #e0e0e0;
        }
        
        body.dark-mode .card {
            background: #2d2d2d;
            color: #e0e0e0;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.5);
        }
        
        body.dark-mode input, 
        body.dark-mode select, 
        body.dark-mode textarea {
            background: #3a3a3a;
            color: #e0e0e0;
            border-color: #555;
        }
        
        body.dark-mode .btn-game-action {
            background: #27ae60;
            color: white;
        }
        
        body.dark-mode .btn-outline {
            background: #3a3a3a;
            color: #e0e0e0;
            border-color: #555;
        }
        
        body.dark-mode table {
            background: #2d2d2d;
            color: #e0e0e0;
        }
        
        body.dark-mode th {
            background: #3a3a3a;
        }
        
        body.dark-mode tr:nth-child(even) {
            background: #333;
        }
        
        body.dark-mode .setting-section {
            border-color: #444;
        }
        
        body.dark-mode .setting-header {
            background: #3a3a3a;
            color: #e0e0e0;
        }
        
        body.dark-mode .setting-header:hover {
            background: #444;
        }
        
        body.dark-mode .setting-content {
            background: #2d2d2d;
        }
        
        body.dark-mode .setting-checkbox {
            background: #3a3a3a;
        }
        
        body.dark-mode .setting-checkbox:hover {
            background: #444;
        }
        
        /* Font Sizes */
        body.font-small {
            font-size: 14px;
        }
        
        body.font-medium {
            font-size: 16px;
        }
        
        body.font-large {
            font-size: 18px;
        }
        
        /* Compact Mode */
        body.compact-mode .card {
            padding: 15px;
        }
        
        body.compact-mode .setup-group {
            margin-bottom: 12px;
        }
        
        body.compact-mode h2 {
            margin-bottom: 15px;
        }
    </style>
    
    <!-- Error Handler -->
    <script>
        window.onerror = function(msg, url, line, col, error) {
            // Ignore cross-origin script errors from CDNs (these are normal)
            if (msg === "Script error." && line === 0) {
                return true; // Suppress this error
            }
            
            // Wait for DOM to be ready
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', function() {
                    displayError(msg, url, line, col, error);
                });
            } else {
                displayError(msg, url, line, col, error);
            }
            return false;
        };
        
        function displayError(msg, url, line, col, error) {
            var d = document.getElementById('debug-log');
            if(d){
                d.style.display = 'block';
                var errorMsg = "Error: " + msg;
                if (url) errorMsg += "\nFile: " + url;
                if (line > 0) errorMsg += "\nLine: " + line;
                if (col > 0) errorMsg += "\nColumn: " + col;
                if (error && error.stack) errorMsg += "\n\nStack:\n" + error.stack;
                d.innerHTML += errorMsg + "\n\n---\n\n";
            }
        }
    </script>
</head>
<body>

<!-- Debug Log -->
<div id="debug-log"></div>

<!-- CUSTOM MODAL -->
<div id="custom-modal" class="modal-overlay">
    <div class="modal-box">
        <span id="modal-text" class="modal-text"></span>
        <div class="modal-btn-row">
            <button id="modal-cancel" class="modal-btn cancel" onclick="closeModal()">Cancel</button>
            <button id="modal-confirm" class="modal-btn confirm">Yes</button>
        </div>
    </div>
</div>

<!-- JOIN GAME MODAL -->
<div id="join-modal" class="modal-overlay" style="display:none">
    <div class="modal-box">
        <h3 style="margin-top:0">Join Game</h3>
        <input type="text" id="game-code-input" placeholder="Enter 6-digit code" 
               maxlength="6" style="text-align:center; font-size:24px; letter-spacing:5px; text-transform:uppercase;">
        <div class="modal-btn-row" style="margin-top:20px">
            <button class="modal-btn cancel" onclick="closeJoinModal()">Cancel</button>
            <button class="modal-btn confirm" onclick="attemptJoinGame()">Join</button>
        </div>
    </div>
</div>

<!-- SETUP SCREEN -->
<div class="card" id="setup-screen">
    <h2 style="text-align:center">üé≤ Game Scorer</h2>
    
    <button id="restore-btn" class="btn-restore" style="display:none;" onclick="restoreGame()">‚ö†Ô∏è Resume Last Game</button>

    <div class="setup-group">
        <label>Select Game</label>
        <select id="game-select" onchange="updateSetupUI()"></select>
    </div>
    
    <div class="setup-group">
        <label>Number of Players</label>
        <input type="hidden" id="player-count" value="4">
        <div class="player-count-grid">
            <button class="pc-btn" id="pc-2" onclick="setPlayerCount(2)">2</button>
            <button class="pc-btn" id="pc-3" onclick="setPlayerCount(3)">3</button>
            <button class="pc-btn active" id="pc-4" onclick="setPlayerCount(4)">4</button>
            <button class="pc-btn" id="pc-5" onclick="setPlayerCount(5)">5</button>
            <button class="pc-btn" id="pc-6" onclick="setPlayerCount(6)">6</button>
            <button class="pc-btn" id="pc-7" onclick="setPlayerCount(7)">7</button>
            <button class="pc-btn" id="pc-8" onclick="setPlayerCount(8)">8</button>
        </div>
    </div>
    
    <div id="target-option" class="setup-group" style="display:none;">
        <label>Target Score</label>
        <input type="number" id="target-score" inputmode="numeric">
    </div>
    
    <div id="team-option" class="setup-group" style="display:none;">
        <button id="use-teams" class="toggle-btn" onclick="toggleTeams()">Play in Teams?</button>
    </div>
    
    <div id="random-option" class="setup-group" style="display:none;">
        <button id="randomize-goals" class="toggle-btn" onclick="toggleRandomize()">üîÄ Randomize Goals?</button>
    </div>
    
    <!-- Combined options row for Shanghai (teams + randomize) -->
    <div id="shanghai-options-row" style="display:none; gap:10px; margin-bottom:15px;">
        <button id="use-teams-shanghai" class="toggle-btn" style="flex:1;" onclick="toggleTeams()">Play in Teams?</button>
        <button id="randomize-goals-shanghai" class="toggle-btn" style="flex:1;" onclick="toggleRandomize()">üîÄ Randomize Goals?</button>
    </div>
    
    <!-- Combined options row for Spades/Hearts (teams + target) -->
    <div id="team-target-row" style="display:none; gap:10px; margin-bottom:15px; align-items:flex-end;">
        <div style="flex:1;">
            <button id="use-teams-row" class="toggle-btn" style="width:100%;" onclick="toggleTeams()">Play in Teams?</button>
        </div>
        <div style="flex:1;">
            <label style="display:block; margin-bottom:5px; font-size:0.9em;">Target Score</label>
            <input type="number" id="target-score-row" inputmode="numeric" 
                   onchange="document.getElementById('target-score').value = this.value" 
                   style="width:100%; padding:10px; border:1px solid #ddd; border-radius:8px;">
        </div>
    </div>
    
    <!-- ONLINE MULTIPLAYER OPTIONS - Now on same row -->
    <div style="display:flex; gap:10px; margin-bottom:15px;">
        <button class="btn-game-action" style="flex:1;" onclick="showNamesAsHost()">üéÆ Host Game</button>
        <button class="btn-outline" style="flex:1; background:white; border-color:#2980b9; color:#2980b9;" onclick="showJoinPrompt()">üì± Join Game</button>
    </div>
    
    <button class="btn-game-action" onclick="showNames()">‚ñ∂ Start Local Game</button>
    
    <!-- Settings and Leaderboard at bottom -->
    <div style="display:flex; gap:10px; margin-top:20px; padding-top:15px; border-top:1px solid #ddd;">
        <button class="btn-info" style="flex:1;" onclick="showSettings()">‚öôÔ∏è Settings</button>
        <button class="btn-info" style="flex:1;" onclick="showLeaderboard()">üèÜ Leaderboard</button>
    </div>
</div>

<!-- NAME SCREEN -->
<div class="card" id="name-screen" style="display:none;">
    <h2 style="text-align:center">Who is Playing?</h2>
    
    <!-- Game Code Display (for hosts) -->
    <div id="game-code-display" style="display:none; text-align:center; margin-bottom:20px; 
         padding:15px; background:#e8f4fd; border-radius:10px; border:2px solid #3498db;">
        <div style="font-size:14px; color:#666; margin-bottom:5px">Share this code with viewers:</div>
        <div id="game-code-text" style="font-size:36px; font-weight:bold; 
             letter-spacing:8px; color:#2c3e50;"></div>
        <div style="font-size:12px; color:#666; margin-top:5px">
            <span id="viewer-count">0</span> viewer(s) connected
        </div>
    </div>
    
    <div id="name-inputs"></div>
    
    <!-- Host Self-Assignment Button -->
    <div id="host-claim-container" style="display:none; margin-top:15px;">
        <button class="btn-outline" style="background:#e8f4fd; border-color:#3498db; color:#2980b9;" 
                onclick="showHostIdentitySelection()">üéÆ I'm Playing Too</button>
    </div>
    
    <button class="btn-game-action" onclick="startGame()">Start Game</button>
    <button class="btn-outline" onclick="cancelMultiplayer()">Back</button>
</div>

<!-- GAME SCREEN -->
<div class="card" id="game-screen" style="display:none;">
    <div class="game-header">
        <div class="round-title" id="round-label"></div>
        <div class="hero-display" id="hero-content"></div>
    </div>
    
    <div id="game-over-banner" style="display:none;">
        <h2>üèÜ Game Over!</h2>
        <span class="winner-text" id="winner-display"></span>
    </div>
    
    <div id="input-area"></div>
    <div id="error-msg"></div>

    <button id="action-btn" class="btn-game-action" onclick="submitRound()">Submit</button>

    <div style="overflow-x:auto">
        <table id="score-table">
            <thead><tr id="table-head"></tr></thead>
            <tbody id="table-body"></tbody>
            <tfoot><tr id="table-foot" style="background:#eee; font-weight:bold"></tr></tfoot>
        </table>
    </div>
    
    <div id="controls-area">
        <button id="undo-btn" class="btn-undo" style="display:none" onclick="undoRound()">‚Ü© Undo</button>
        
        <div id="exit-controls" style="display:flex; gap:10px; margin-top:20px;">
             <button id="abort-btn" class="btn-outline" style="margin-top:0;" onclick="abortGame()">‚ùå Exit (No Save)</button>
             <button id="finish-btn" class="btn-game-action" style="margin-top:0; background-color:#27ae60;" onclick="finishGameNow()">üíæ Finish & Save</button>
        </div>
    </div>
</div>

<!-- LEADERBOARD SCREEN -->
<div class="card" id="leaderboard-screen" style="display:none;">
    <h2 style="text-align:center">üèÜ Hall of Fame</h2>
    <div id="lb-content"></div>
    
    <button class="btn-game-action" onclick="closeLeaderboard()">Main Menu</button>
    <button class="btn-outline" onclick="clearLeaderboard()">Reset All</button>

    <!-- BACKUP SECTION -->
    <div style="background:#e8f4fd; padding:15px; border-radius:10px; margin-top:20px; text-align:center; border:2px solid #3498db;">
        <h3 style="margin-top:0; color:#2c3e50;">‚òÅÔ∏è Cloud Backup</h3>
        <p style="font-size:0.85em; color:#555;">Save your history to a file so you can move it to another device.</p>
        <button class="btn-game-action" style="background:#27ae60; margin-bottom:10px;" onclick="exportData()">‚¨áÔ∏è Save to File</button>
        <button class="btn-outline" style="background:white; border-color:#2980b9; color:#2980b9;" onclick="triggerImport()">‚¨ÜÔ∏è Load from File</button>
        <input type="file" id="import-file" style="display:none" onchange="importData(this)">
    </div>
</div>


<!-- SETTINGS SCREEN -->
<div class="card" id="settings-screen" style="display:none;">
    <h2 style="text-align:center; margin-bottom:25px;">‚öôÔ∏è Settings</h2>
    
    <style>
        .setting-section {
            margin-bottom: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .setting-header {
            background: #f5f5f5;
            padding: 12px 15px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1em;
            color: #2c3e50;
            user-select: none;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .setting-header:hover {
            background: #eeeeee;
        }
        
        .setting-content {
            padding: 15px;
            background: white;
        }
        
        .setting-row {
            margin-bottom: 15px;
        }
        
        .setting-row:last-child {
            margin-bottom: 0;
        }
        
        .setting-label {
            display: block;
            font-size: 0.9em;
            color: #555;
            margin-bottom: 6px;
            font-weight: 500;
        }
        
        .setting-checkbox {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background: #f9f9f9;
            border-radius: 6px;
            cursor: pointer;
            transition: background 0.2s;
        }
        
        .setting-checkbox:hover {
            background: #f0f0f0;
        }
        
        .setting-checkbox input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
            margin: 0;
        }
        
        .setting-checkbox label {
            cursor: pointer;
            margin: 0;
            flex: 1;
            font-size: 0.95em;
        }
        
        .setting-input, .setting-select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 0.95em;
        }
        
        .setting-input:focus, .setting-select:focus {
            outline: none;
            border-color: #27ae60;
        }
        
        .setting-color {
            width: 100%;
            height: 50px;
            padding: 5px;
            border: 1px solid #ddd;
            border-radius: 6px;
            cursor: pointer;
        }
        
        .setting-divider {
            margin: 20px 0;
            border: none;
            border-top: 1px solid #e0e0e0;
        }
        
        .setting-note {
            font-size: 0.85em;
            color: #888;
            margin-top: 8px;
            font-style: italic;
        }
    </style>
    
    <!-- Firebase Configuration -->
    <details class="setting-section">
        <summary class="setting-header">
            <span>üî• Firebase Configuration</span>
            <span style="font-size:0.8em; color:#888;">‚ñº</span>
        </summary>
        <div class="setting-content">
            <div class="setting-row">
                <div class="setting-checkbox" onclick="document.getElementById('setting-use-custom-firebase').click()">
                    <input type="checkbox" id="setting-use-custom-firebase" onchange="toggleFirebaseFields(); event.stopPropagation();">
                    <label for="setting-use-custom-firebase">Use Custom Firebase Instance</label>
                </div>
            </div>
            
            <div id="firebase-custom-fields" style="display:none;">
                <div class="setting-divider"></div>
                
                <div class="setting-row">
                    <span class="setting-label">API Key</span>
                    <input type="text" class="setting-input" id="setting-firebase-api-key" placeholder="Your Firebase API Key">
                </div>
                
                <div class="setting-row">
                    <span class="setting-label">Database URL</span>
                    <input type="text" class="setting-input" id="setting-firebase-db-url" placeholder="https://your-app.firebaseio.com">
                </div>
                
                <div class="setting-row">
                    <span class="setting-label">Project ID</span>
                    <input type="text" class="setting-input" id="setting-firebase-project-id" placeholder="your-project-id">
                </div>
                
                <div class="setting-row">
                    <span class="setting-label">Storage Bucket</span>
                    <input type="text" class="setting-input" id="setting-firebase-storage" placeholder="your-app.appspot.com">
                </div>
                
                <div class="setting-row">
                    <span class="setting-label">Messaging Sender ID</span>
                    <input type="text" class="setting-input" id="setting-firebase-sender-id" placeholder="123456789">
                </div>
                
                <div class="setting-row">
                    <span class="setting-label">App ID</span>
                    <input type="text" class="setting-input" id="setting-firebase-app-id" placeholder="1:123:web:abc123">
                    <div class="setting-note">‚ö†Ô∏è Requires app reload to take effect</div>
                </div>
            </div>
        </div>
    </details>
    
    <!-- Theme & Display -->
    <details class="setting-section" open>
        <summary class="setting-header">
            <span>üé® Theme & Display</span>
            <span style="font-size:0.8em; color:#888;">‚ñº</span>
        </summary>
        <div class="setting-content">
            <div class="setting-row">
                <div class="setting-checkbox" onclick="document.getElementById('setting-dark-mode').click()">
                    <input type="checkbox" id="setting-dark-mode" onclick="event.stopPropagation();">
                    <label for="setting-dark-mode">Dark Mode</label>
                </div>
            </div>
            
            <div class="setting-row">
                <span class="setting-label">Accent Color</span>
                <input type="color" class="setting-color" id="setting-accent-color" value="#27ae60">
            </div>
            
            <div class="setting-row">
                <span class="setting-label">Font Size</span>
                <select class="setting-select" id="setting-font-size">
                    <option value="small">Small</option>
                    <option value="medium">Medium</option>
                    <option value="large">Large</option>
                </select>
            </div>
            
            <div class="setting-row">
                <div class="setting-checkbox" onclick="document.getElementById('setting-compact-mode').click()">
                    <input type="checkbox" id="setting-compact-mode" onclick="event.stopPropagation();">
                    <label for="setting-compact-mode">Compact Mode</label>
                </div>
            </div>
            
            <div class="setting-row">
                <div class="setting-checkbox" onclick="document.getElementById('setting-show-dealer-notes').click()">
                    <input type="checkbox" id="setting-show-dealer-notes" onclick="event.stopPropagation();">
                    <label for="setting-show-dealer-notes">Show Dealer Rotation Notes</label>
                </div>
            </div>
        </div>
    </details>
    
    <!-- Game Defaults -->
    <details class="setting-section" open>
        <summary class="setting-header">
            <span>üé≤ Game Defaults</span>
            <span style="font-size:0.8em; color:#888;">‚ñº</span>
        </summary>
        <div class="setting-content">
            <div class="setting-row">
                <span class="setting-label">Default Player Count</span>
                <select class="setting-select" id="setting-default-players">
                    <option value="2">2 Players</option>
                    <option value="3">3 Players</option>
                    <option value="4">4 Players</option>
                    <option value="5">5 Players</option>
                    <option value="6">6 Players</option>
                    <option value="7">7 Players</option>
                    <option value="8">8 Players</option>
                </select>
            </div>
            
            <div class="setting-row">
                <span class="setting-label">Default Game</span>
                <select class="setting-select" id="setting-default-game">
                    <option value="shanghai">Shang-Hi</option>
                    <option value="mexicantrain">Mexican Train</option>
                    <option value="oldhell">Old Hell</option>
                    <option value="spades">Spades</option>
                    <option value="hearts">Hearts</option>
                    <option value="rummikub">Rummikub</option>
                    <option value="triominos">Triominos</option>
                    <option value="qwirkle">Qwirkle</option>
                </select>
            </div>
            
            <div class="setting-row">
                <div class="setting-checkbox" onclick="document.getElementById('setting-remember-last').click()">
                    <input type="checkbox" id="setting-remember-last" onclick="event.stopPropagation();">
                    <label for="setting-remember-last">Remember Last Game Settings</label>
                </div>
            </div>
        </div>
    </details>
    
    <!-- Multiplayer -->
    <details class="setting-section">
        <summary class="setting-header">
            <span>üåê Multiplayer</span>
            <span style="font-size:0.8em; color:#888;">‚ñº</span>
        </summary>
        <div class="setting-content">
            <div class="setting-row">
                <div class="setting-checkbox" onclick="document.getElementById('setting-remember-code').click()">
                    <input type="checkbox" id="setting-remember-code" onclick="event.stopPropagation();">
                    <label for="setting-remember-code">Remember Last Game Code</label>
                </div>
            </div>
            
            <div class="setting-row">
                <span class="setting-label">Default Host Name</span>
                <input type="text" class="setting-input" id="setting-default-host-name" placeholder="Your name when hosting">
            </div>
        </div>
    </details>
    
    <!-- Sound & Notifications -->
    <details class="setting-section">
        <summary class="setting-header">
            <span>üîä Sound & Notifications</span>
            <span style="font-size:0.8em; color:#888;">‚ñº</span>
        </summary>
        <div class="setting-content">
            <div class="setting-row">
                <div class="setting-checkbox" onclick="document.getElementById('setting-sound-effects').click()">
                    <input type="checkbox" id="setting-sound-effects" onclick="event.stopPropagation();">
                    <label for="setting-sound-effects">Sound Effects</label>
                </div>
            </div>
            
            <div class="setting-row">
                <div class="setting-checkbox" onclick="document.getElementById('setting-vibration').click()">
                    <input type="checkbox" id="setting-vibration" onclick="event.stopPropagation();">
                    <label for="setting-vibration">Vibration (Mobile)</label>
                </div>
            </div>
            
            <div class="setting-row">
                <div class="setting-checkbox" onclick="document.getElementById('setting-notify-turn').click()">
                    <input type="checkbox" id="setting-notify-turn" onclick="event.stopPropagation();">
                    <label for="setting-notify-turn">Notify When It's Your Turn (Viewers)</label>
                </div>
            </div>
        </div>
    </details>
    
    <!-- Data Management -->
    <details class="setting-section">
        <summary class="setting-header">
            <span>üíæ Data Management</span>
            <span style="font-size:0.8em; color:#888;">‚ñº</span>
        </summary>
        <div class="setting-content">
            <div class="setting-row">
                <button class="btn-game-action" style="background:#27ae60; width:100%;" onclick="exportData()">‚¨áÔ∏è Backup Game History</button>
            </div>
            <div class="setting-row">
                <button class="btn-outline" style="background:white; border-color:#2980b9; color:#2980b9; width:100%;" onclick="triggerImport()">‚¨ÜÔ∏è Restore Game History</button>
                <input type="file" id="import-file" style="display:none" onchange="importData(this)">
            </div>
            
            <div class="setting-divider"></div>
            
            <div class="setting-row">
                <button class="btn-game-action" style="background:#3498db; width:100%;" onclick="exportSettings()">‚¨áÔ∏è Export Settings</button>
            </div>
            <div class="setting-row">
                <button class="btn-outline" style="background:white; border-color:#3498db; color:#3498db; width:100%;" onclick="triggerSettingsImport()">‚¨ÜÔ∏è Import Settings</button>
                <input type="file" id="settings-import-file" style="display:none" accept=".json" onchange="importSettings(this)">
            </div>
        </div>
    </details>
    
    <!-- Advanced -->
    <details class="setting-section">
        <summary class="setting-header">
            <span>üîß Advanced</span>
            <span style="font-size:0.8em; color:#888;">‚ñº</span>
        </summary>
        <div class="setting-content">
            <div class="setting-row">
                <div class="setting-checkbox" onclick="document.getElementById('setting-debug-mode').click()">
                    <input type="checkbox" id="setting-debug-mode" onclick="event.stopPropagation();">
                    <label for="setting-debug-mode">Debug Mode (Console Logging)</label>
                </div>
            </div>
            
            <div class="setting-divider"></div>
            
            <div class="setting-row">
                <button class="btn-outline" style="background:#f8d7da; border-color:#c0392b; color:#c0392b; width:100%;" onclick="resetSettingsToDefault()">üîÑ Reset All Settings to Default</button>
            </div>
        </div>
    </details>
    
    <!-- Action Buttons -->
    <button class="btn-game-action" onclick="saveSettingsFromForm()">üíæ Save Settings</button>
    <button class="btn-outline" onclick="closeSettings()">Cancel</button>
</div>



<!-- Load scripts in order -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="js/config.js"></script>
<script src="js/utils.js"></script>
<script src="js/state.js"></script>
<script src="js/storage.js"></script>

<!-- Game Classes -->
<script src="js/games/GameBase.js"></script>
<script src="js/games/Shanghai.js"></script>
<script src="js/games/MexicanTrain.js"></script>
<script src="js/games/OldHell.js"></script>
<script src="js/games/Spades.js"></script>
<script src="js/games/Hearts.js"></script>
<script src="js/games/Rummikub.js"></script>
<script src="js/games/Triominos.js"></script>
<script src="js/games/Qwirkle.js"></script>

<!-- UI Modules -->
<script src="js/ui/modals.js"></script>
<script src="js/ui/setup.js"></script>
<script src="js/ui/names.js"></script>
<script src="js/ui/table.js"></script>
<script src="js/ui/game.js"></script>
<script src="js/ui/leaderboard.js"></script>
<script src="js/ui/settings.js"></script>

<!-- Firebase Module (ES6 Module) -->
<script type="module" src="js/firebase.js"></script>

<!-- Initialize -->
<script>
    window.onload = function() {
        initApp();
        initializeSettings();
        if('wakeLock' in navigator) {
            navigator.wakeLock.request('screen').catch(()=>{});
        }
    };
</script>

</body>
</html>